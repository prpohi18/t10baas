<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Programmeerimise p√µhikursus</title>
    <script>
        let xhr=new XMLHttpRequest()
        xhr.onreadystatechange=showAnswer
        function bmi(){
            let weight="weight="+document.getElementById("weightInput").value
            let height="height="+document.getElementById("heightInput").value
            xhr.open("GET", "new?"+weight+"&"+height, true)
            xhr.send(true)
        }
        function showAnswer(){
            if(xhr.readyState==4){
                document.getElementById("vastus").innerHTML=xhr.responseText
            }
        }    
        let xhr2=new XMLHttpRequest()
        xhr2.onreadystatechange=getResult
        function getLatest(){
            xhr2.open("GET", "getlatest", true)
            xhr2.send(true)
        }
        function getResult(){
            if(xhr2.readyState==4){
                document.getElementById("latest").innerHTML=xhr2.responseText
            }
        }
        window.onload = getLatest
</script>
<style>
    #bmiform{
        margin: 30px 0px 0px 30px;
    }
</style>
</head>
<body>
    <div id="bmiform">
        <form action="" method="get"></form>
        <label>Kaal</label>
        <input type="text" value="" id="weightInput" placeholder="kg">
        <label>Pikkus</label>
        <input type="text" value="" id="heightInput" placeholder="cm">
        <br>
        <input type="button" id="calculate" value="Arvuta" onclick="bmi()">
        <div id="vastus"></div>
        <h5>Latest result:</h5>
        <div id="latest"></div>
    </div>
</body>
</html> 